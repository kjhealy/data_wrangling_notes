<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.54">

  <meta name="author" content="Kieran Healy">
  <meta name="dcterms.date" content="2024-10-02">
  <title>Data Wrangling with R and the Tidyverse – Tidy data</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f5bde6; background-color: #24273a; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #cad3f5; } /* Normal */
    code span.al { color: #ed8796; font-weight: bold; } /* Alert */
    code span.an { color: #eed49f; } /* Annotation */
    code span.at { color: #b7bdf8; } /* Attribute */
    code span.bn { color: #ed8796; } /* BaseN */
    code span.bu { color: #ed8796; } /* BuiltIn */
    code span.cf { color: #c6a0f6; } /* ControlFlow */
    code span.ch { color: #f5bde6; } /* Char */
    code span.cn { color: #8aadf4; } /* Constant */
    code span.co { color: #6e738d; font-style: italic; } /* Comment */
    code span.cv { color: #6e738d; font-style: italic; } /* CommentVar */
    code span.do { color: #ed8796; } /* Documentation */
    code span.dt { color: #c6a0f6; } /* DataType */
    code span.dv { color: #f5a97f; } /* DecVal */
    code span.er { color: #ed8796; text-decoration: underline; } /* Error */
    code span.ex { color: #8aadf4; } /* Extension */
    code span.fl { color: #f5a97f; } /* Float */
    code span.fu { color: #8aadf4; } /* Function */
    code span.im { color: #a6da95; } /* Import */
    code span.in { color: #f5a97f; } /* Information */
    code span.kw { color: #c6a0f6; } /* Keyword */
    code span.op { color: #91d7e3; } /* Operator */
    code span.ot { color: #f5a97f; } /* Other */
    code span.pp { color: #f5bde6; } /* Preprocessor */
    code span.re { color: #6e738d; font-style: italic; } /* RegionMarker */
    code span.sc { color: #f5bde6; } /* SpecialChar */
    code span.ss { color: #ed8796; } /* SpecialString */
    code span.st { color: #a6da95; } /* String */
    code span.va { color: #f5bde6; } /* Variable */
    code span.vs { color: #ed8796; } /* VerbatimString */
    code span.wa { color: #f5a97f; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#252F3E" class="quarto-title-block center">
  <h1 class="title">Tidy data</h1>
  <p class="subtitle">Data Wrangling, Session 4</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Kieran Healy 
</div>
        <p class="quarto-title-affiliation">
            Code Horizons
          </p>
    </div>
</div>

  <p class="date">October 2, 2024</p>
</section>
<section>
<section id="tidy-data-with-tidyr" class="title-slide slide level1 inv-title center" data-background-color="#252F3E">
<h1>Tidy data with <span class="fg-yellow">tidyr</span></h1>

</section>
<section id="load-the-packages-as-always" class="slide level2">
<h2>Load the packages, as always</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)      <span class="co"># manage file paths</span></span>
<span id="cb1-2"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(socviz)    <span class="co"># data and some useful functions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># your friend and mine</span></span>
<span id="cb2-2"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder) <span class="co"># gapminder data</span></span>
<span id="cb2-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a aria-hidden="true" tabindex="-1"></a><span class="do">## Quieten dplyr summarise chatter (with an 's')!</span></span>
<span id="cb2-5"><a aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">dplyr.summarise.inform =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section class="slide level2">

<div class="huge">
<p><span class="fg-red">Tidy data</span><br>is data in<br><span class="fg-red">long</span> format</p>
</div>
</section>
<section id="the-tidyverse-wants-to-be-fed-tidy-data" class="slide level2">
<h2>The Tidyverse wants to be fed <span class="fg-yellow">tidy data</span></h2>

<img data-src="img/feed-me-seymour.gif" class="r-stretch"></section>
<section id="get-your-data-into-long-format" class="slide level2">
<h2>Get your data into long format</h2>
<p>Very, very often, the solution to some data-wrangling problem in Tidyverse-focused workflow is:</p>
<div class="fragment">
<!-- -->
<h3 id="get-the-data-in-long-format"><span class="fg-lblue">Get the data in long format</span></h3>
</div>
<div class="fragment">
<p>Then do the recoding thing that you want.</p>
</div>
<div class="fragment">
<p>Then transform it back to something wider if needed.</p>
</div>
</section>
<section id="this-isnt-an-iron-rule" class="slide level2">
<h2>This isn’t an <span class="fg-lblue"><em>iron</em></span> rule</h2>
<p>As we’ll see later, <span class="fg-orange"><code>dplyr</code></span> <em>is</em> able to do “rowwise” operations if you need them.</p>
</section>
<section class="slide level2">

<div class="huge">
<p>It is a<br><span class="fg-orange">pretty good</span><br>rule though</p>
</div>
</section>
<section id="tidy-data" class="slide level2">
<h2>Tidy data</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a aria-hidden="true" tabindex="-1"></a>gapminder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 1,704 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="tidy-data-1" class="slide level2">
<h2>Tidy data</h2>

<img data-src="img/tidy-gapminder.png" class="r-stretch"></section>
<section id="tidy-data-2" class="slide level2">
<h2>Tidy data</h2>
<p><img data-src="img/tidy-1.png"></p>

<aside><div>
<p>Grolemund &amp; Wickham (2017)</p>
</div></aside></section>
<section id="tidy-data-3" class="slide level2">
<h2>Tidy data</h2>
<div class="fragment">
<!-- -->
<h3 id="each-variable-has-its-own-column.">Each variable has its own column.</h3>
</div>
<div class="fragment">
<!-- -->
<h3 id="each-observation-has-its-own-row.">Each observation has its own row.</h3>
</div>
<div class="fragment">
<!-- -->
<h3 id="each-value-has-its-own-cell.">Each value has its own cell.</h3>
</div>
<div class="fragment">
<!-- -->
<h3 id="when-data-is-tidy-in-this-way-the-vectorized-character-of-rs-way-of-doing-things-works-best.">When data is tidy in this way, the vectorized character of R’s way of doing things works best.</h3>
</div>
</section>
<section id="untidy-data-common-for-good-reasons" class="slide level2">
<h2>Untidy data: common for good reasons</h2>

<img data-src="img/census-untidy-small.png" class="r-stretch"></section>
<section id="untidy-data-common-for-good-reasons-1" class="slide level2">
<h2>Untidy data: common for good reasons</h2>
<p>Storing data in long form is often <em>inefficient</em></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(covdata)</span>
<span id="cb5-2"><a aria-hidden="true" tabindex="-1"></a>covus <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"NY"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb5-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date<span class="sc">:</span>fips, measure<span class="sc">:</span>count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 11,872 × 5
   date       state fips  measure                    count
   &lt;date&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;                      &lt;dbl&gt;
 1 2021-03-07 NY    36    positive                 1681169
 2 2021-03-07 NY    36    probable_cases                NA
 3 2021-03-07 NY    36    negative                      NA
 4 2021-03-07 NY    36    pending                       NA
 5 2021-03-07 NY    36    hospitalized_currently      4789
 6 2021-03-07 NY    36    hospitalized_cumulative       NA
 7 2021-03-07 NY    36    in_icu_currently             999
 8 2021-03-07 NY    36    in_icu_cumulative             NA
 9 2021-03-07 NY    36    on_ventilator_currently      682
10 2021-03-07 NY    36    on_ventilator_cumulative      NA
# ℹ 11,862 more rows</code></pre>
</div>
</div>
</section>
<section id="untidy-data-common-for-good-reasons-2" class="slide level2">
<h2>Untidy data: common for good reasons</h2>
<p>Storing data in wide form is <em>easier to display</em> in a printed table</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb7-2"><a aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, island, year) <span class="sc">|&gt;</span> </span>
<span id="cb7-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">bill =</span> <span class="fu">round</span>(<span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),<span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb7-5"><a aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">species</th>
<th style="text-align: left;">island</th>
<th style="text-align: right;">year</th>
<th style="text-align: right;">bill</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">38.32</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">38.70</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">2009</td>
<td style="text-align: right;">39.69</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">39.10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">38.19</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">2009</td>
<td style="text-align: right;">38.15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">38.80</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">38.77</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">2009</td>
<td style="text-align: right;">39.31</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">48.72</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">48.70</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">2009</td>
<td style="text-align: right;">49.05</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">47.01</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">46.94</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">2009</td>
<td style="text-align: right;">48.50</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="untidy-data-common-for-good-reasons-3" class="slide level2">
<h2>Untidy data: common for good reasons</h2>
<p>Storing data in wide form is <em>easier to display</em> in a printed table</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, island, year) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">bill =</span> <span class="fu">round</span>(<span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> bill) <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">species</th>
<th style="text-align: left;">island</th>
<th style="text-align: right;">2007</th>
<th style="text-align: right;">2008</th>
<th style="text-align: right;">2009</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">38.32</td>
<td style="text-align: right;">38.70</td>
<td style="text-align: right;">39.69</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">39.10</td>
<td style="text-align: right;">38.19</td>
<td style="text-align: right;">38.15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">38.80</td>
<td style="text-align: right;">38.77</td>
<td style="text-align: right;">39.31</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">48.72</td>
<td style="text-align: right;">48.70</td>
<td style="text-align: right;">49.05</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">47.01</td>
<td style="text-align: right;">46.94</td>
<td style="text-align: right;">48.50</td>
</tr>
</tbody>
</table>
</div>
</div>

<aside><div>
<p>Again, these tables are made directly in R with the code you see here.</p>
</div></aside></section>
<section id="its-also-common-for-less-good-reasons" class="slide level2">
<h2>It’s also common for <span class="fg-orange"><em>less</em></span> good reasons</h2>

<img data-src="img/election-spreadsheet.png" class="r-stretch"></section>
<section id="its-also-common-for-less-good-reasons-1" class="slide level2">
<h2>It’s also common for <span class="fg-orange"><em>less</em></span> good reasons</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/election-spreadsheet.png"></p>
</div><div class="column right" style="width:40%;">
<ul>
<li>More than one header row</li>
<li>Mixed data types in some columns</li>
<li>Color and typography used to encode variables and their values</li>
</ul>
</div></div>
</section>
<section id="fix-it-before-you-import-it" class="slide level2">
<h2>Fix it <span class="fg-yellow">before</span> you import it</h2>
<ul>
<li>Prevention is better than cure!</li>
<li>Broman KW, Woo KH (2018) “<a href="doi:10.1080/00031305.2017.1375989">Data organization in spreadsheets</a>.” <em>The American Statistician</em> 78:2–10</li>
</ul>

<img data-src="img/broman-and-woo.png" style="width:60.0%" class="r-stretch"></section>
<section id="key-points-from-broman-woo" class="slide level2">
<h2>Key points from Broman &amp; Woo</h2>

<img data-src="img/broman_woo_inconsistent_dates.png" class="r-stretch quarto-figure-center"><p class="caption">Use a consistent date format</p></section>
<section class="slide level2">

<div class="huge">
<p><span class="fg-green">ISO 8601</span> <br> <span class="fg-pink">YYYY-MM-DD</span> <br></p>
</div>
<ul>
<li>The one true year-month-day format</li>
</ul>
</section>
<section id="key-points-from-broman-woo-1" class="slide level2">
<h2>Key points from Broman &amp; Woo</h2>

<img data-src="img/broman_woo_implicit_repeats_and_headers.png" class="r-stretch"><ul>
<li>No empty cells.</li>
<li>Use one row of headers only.</li>
</ul>
</section>
<section id="key-points-from-broman-woo-2" class="slide level2">
<h2>Key points from Broman &amp; Woo</h2>

<img data-src="img/broman_woo_tidied_1.png" class="r-stretch quarto-figure-center"><p class="caption">Tidied version</p></section>
<section id="key-points-from-broman-woo-3" class="slide level2">
<h2>Key points from Broman &amp; Woo</h2>

<img data-src="img/broman_woo_non_rectangular.png" class="r-stretch quarto-figure-center"><p class="caption">Rectangle your data</p></section>
<section id="key-points-from-broman-woo-4" class="slide level2">
<h2>Key points from Broman &amp; Woo</h2>

<img data-src="img/broman_woo_5D_pair_tables.png" class="r-stretch quarto-figure-center"><p class="caption">Use more than one table if needed. We can join them later.</p></section>
<section id="key-points-from-broman-woo-5" class="slide level2">
<h2>Key points from Broman &amp; Woo</h2>

<img data-src="img/broman_woo_multi_header_rows.png" class="r-stretch quarto-figure-center"><p class="caption">Needs a single header row and a consistent naming scheme.</p></section>
<section id="key-points-from-broman-woo-6" class="slide level2">
<h2>Key points from Broman &amp; Woo</h2>

<img data-src="img/broman_woo_tidied_2.png" class="r-stretch quarto-figure-center"><p class="caption">Tidied version.</p></section>
<section id="the-most-common-tidyr-operation" class="slide level2">
<h2>The most common <span class="fg-orange"><code>tidyr</code></span> operation</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a aria-hidden="true" tabindex="-1"></a>edu</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 366 × 11
   age   sex    year total elem4 elem8   hs3   hs4 coll3 coll4 median
   &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1 25-34 Male   2016 21845   116   468  1427  6386  6015  7432     NA
 2 25-34 Male   2015 21427   166   488  1584  6198  5920  7071     NA
 3 25-34 Male   2014 21217   151   512  1611  6323  5910  6710     NA
 4 25-34 Male   2013 20816   161   582  1747  6058  5749  6519     NA
 5 25-34 Male   2012 20464   161   579  1707  6127  5619  6270     NA
 6 25-34 Male   2011 20985   190   657  1791  6444  5750  6151     NA
 7 25-34 Male   2010 20689   186   641  1866  6458  5587  5951     NA
 8 25-34 Male   2009 20440   184   695  1806  6495  5508  5752     NA
 9 25-34 Male   2008 20210   172   714  1874  6356  5277  5816     NA
10 25-34 Male   2007 20024   246   757  1930  6361  5137  5593     NA
# ℹ 356 more rows</code></pre>
</div>
</div>
<ul>
<li>The “Level of Schooling Attained” measure is spread across the columns, from <code>elem4</code> to <code>coll4</code>.</li>
<li>This is fine for a compact table, but for us it should be a single measure, say, “education”.</li>
</ul>
</section>
<section id="wide-to-long-with-pivot_longer" class="slide level2">
<h2>Wide to long with <span class="fg-green"><code>pivot_longer()</code></span></h2>
<ul>
<li>We’re going to <em>pivot</em> the table. That is, we’ll put the columns <code>elem4:coll4</code> into a new column, creating a new categorical measure named <code>education</code>. The numbers currently under each column will become a new <span class="fg-green">value</span> column corresponding to that level of education.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a aria-hidden="true" tabindex="-1"></a>edu <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(elem4<span class="sc">:</span>coll4, <span class="at">names_to =</span> <span class="st">"education"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,196 × 7
   age   sex    year total median education value
   &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
 1 25-34 Male   2016 21845     NA elem4       116
 2 25-34 Male   2016 21845     NA elem8       468
 3 25-34 Male   2016 21845     NA hs3        1427
 4 25-34 Male   2016 21845     NA hs4        6386
 5 25-34 Male   2016 21845     NA coll3      6015
 6 25-34 Male   2016 21845     NA coll4      7432
 7 25-34 Male   2015 21427     NA elem4       166
 8 25-34 Male   2015 21427     NA elem8       488
 9 25-34 Male   2015 21427     NA hs3        1584
10 25-34 Male   2015 21427     NA hs4        6198
# ℹ 2,186 more rows</code></pre>
</div>
</div>
</section>
<section id="wide-to-long-with-pivot_longer-1" class="slide level2">
<h2>Wide to long with <span class="fg-green"><code>pivot_longer()</code></span></h2>
<ul>
<li>We can name the “value” column to whatever we like. Here it’s a number of people, so let’s call it “<code>n</code>”.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a aria-hidden="true" tabindex="-1"></a>edu <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(elem4<span class="sc">:</span>coll4, <span class="at">names_to =</span> <span class="st">"education"</span>, <span class="at">values_to =</span> <span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,196 × 7
   age   sex    year total median education     n
   &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
 1 25-34 Male   2016 21845     NA elem4       116
 2 25-34 Male   2016 21845     NA elem8       468
 3 25-34 Male   2016 21845     NA hs3        1427
 4 25-34 Male   2016 21845     NA hs4        6386
 5 25-34 Male   2016 21845     NA coll3      6015
 6 25-34 Male   2016 21845     NA coll4      7432
 7 25-34 Male   2015 21427     NA elem4       166
 8 25-34 Male   2015 21427     NA elem8       488
 9 25-34 Male   2015 21427     NA hs3        1584
10 25-34 Male   2015 21427     NA hs4        6198
# ℹ 2,186 more rows</code></pre>
</div>
</div>
</section>
<section id="lets-recode-it-while-were-here" class="slide level2">
<h2>Let’s <span class="fg-green">recode()</span> it while we’re here</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a aria-hidden="true" tabindex="-1"></a>edu <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(elem4<span class="sc">:</span>coll4, <span class="at">names_to =</span> <span class="st">"education"</span>, <span class="at">values_to =</span> <span class="st">"n"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">education =</span> <span class="fu">recode</span>(education, </span>
<span id="cb15-4"><a aria-hidden="true" tabindex="-1"></a>                            <span class="at">elem4 =</span> <span class="st">"Elementary 4"</span>, <span class="at">elem8 =</span> <span class="st">"Elementary 8"</span>, </span>
<span id="cb15-5"><a aria-hidden="true" tabindex="-1"></a>                            <span class="at">hs3 =</span> <span class="st">"High School 3"</span>, <span class="at">hs4 =</span> <span class="st">"High School 4"</span>,</span>
<span id="cb15-6"><a aria-hidden="true" tabindex="-1"></a>                            <span class="at">coll3 =</span> <span class="st">"College 3"</span>, <span class="at">coll4 =</span> <span class="st">"College 4"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,196 × 7
   age   sex    year total median education         n
   &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;
 1 25-34 Male   2016 21845     NA Elementary 4    116
 2 25-34 Male   2016 21845     NA Elementary 8    468
 3 25-34 Male   2016 21845     NA High School 3  1427
 4 25-34 Male   2016 21845     NA High School 4  6386
 5 25-34 Male   2016 21845     NA College 3      6015
 6 25-34 Male   2016 21845     NA College 4      7432
 7 25-34 Male   2015 21427     NA Elementary 4    166
 8 25-34 Male   2015 21427     NA Elementary 8    488
 9 25-34 Male   2015 21427     NA High School 3  1584
10 25-34 Male   2015 21427     NA High School 4  6198
# ℹ 2,186 more rows</code></pre>
</div>
</div>
<ul>
<li>The argument order of <span class="fg-green"><strong><code>recode()</code></strong></span> is inconsistent with other tidyverse functions and it may be superceded in the future.</li>
</ul>
</section>
<section id="pivot_longer-implies-pivot_wider" class="slide level2">
<h2><span class="fg-green">pivot_longer()</span> implies <span class="fg-green">pivot_wider()</span></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a aria-hidden="true" tabindex="-1"></a>gapminder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 1,704 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
<p>But they’re not symmetric operations!</p>
</section>
<section id="pivot_longer-implies-pivot_wider-1" class="slide level2">
<h2><span class="fg-green">pivot_longer()</span> implies <span class="fg-green">pivot_wider()</span></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19" data-source-line-numbers="nil" data-code-line-numbers="3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, continent, year, lifeExp) <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> lifeExp) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 142 × 14
   country     continent `1952` `1957` `1962` `1967` `1972` `1977` `1982` `1987`
   &lt;fct&gt;       &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 Afghanistan Asia        28.8   30.3   32.0   34.0   36.1   38.4   39.9   40.8
 2 Albania     Europe      55.2   59.3   64.8   66.2   67.7   68.9   70.4   72  
 3 Algeria     Africa      43.1   45.7   48.3   51.4   54.5   58.0   61.4   65.8
 4 Angola      Africa      30.0   32.0   34     36.0   37.9   39.5   39.9   39.9
 5 Argentina   Americas    62.5   64.4   65.1   65.6   67.1   68.5   69.9   70.8
 6 Australia   Oceania     69.1   70.3   70.9   71.1   71.9   73.5   74.7   76.3
 7 Austria     Europe      66.8   67.5   69.5   70.1   70.6   72.2   73.2   74.9
 8 Bahrain     Asia        50.9   53.8   56.9   59.9   63.3   65.6   69.1   70.8
 9 Bangladesh  Asia        37.5   39.3   41.2   43.5   45.3   46.9   50.0   52.8
10 Belgium     Europe      68     69.2   70.2   70.9   71.4   72.8   73.9   75.4
# ℹ 132 more rows
# ℹ 4 more variables: `1992` &lt;dbl&gt;, `1997` &lt;dbl&gt;, `2002` &lt;dbl&gt;, `2007` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="what-about-multiple-columns" class="slide level2">
<h2>What about <span class="fg-yellow"><em>multiple</em></span> columns?</h2>
<ul>
<li>This is a pretty common problem. A first thought (“Just don’t mention the other columns”) isn’t it:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> lifeExp) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 1,704 × 16
   country  continent    pop gdpPercap `1952` `1957` `1962` `1967` `1972` `1977`
   &lt;fct&gt;    &lt;fct&gt;      &lt;int&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 Afghani… Asia      8.43e6      779.   28.8   NA     NA     NA     NA     NA  
 2 Afghani… Asia      9.24e6      821.   NA     30.3   NA     NA     NA     NA  
 3 Afghani… Asia      1.03e7      853.   NA     NA     32.0   NA     NA     NA  
 4 Afghani… Asia      1.15e7      836.   NA     NA     NA     34.0   NA     NA  
 5 Afghani… Asia      1.31e7      740.   NA     NA     NA     NA     36.1   NA  
 6 Afghani… Asia      1.49e7      786.   NA     NA     NA     NA     NA     38.4
 7 Afghani… Asia      1.29e7      978.   NA     NA     NA     NA     NA     NA  
 8 Afghani… Asia      1.39e7      852.   NA     NA     NA     NA     NA     NA  
 9 Afghani… Asia      1.63e7      649.   NA     NA     NA     NA     NA     NA  
10 Afghani… Asia      2.22e7      635.   NA     NA     NA     NA     NA     NA  
# ℹ 1,694 more rows
# ℹ 6 more variables: `1982` &lt;dbl&gt;, `1987` &lt;dbl&gt;, `1992` &lt;dbl&gt;, `1997` &lt;dbl&gt;,
#   `2002` &lt;dbl&gt;, `2007` &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li><code>pop</code> and <code>gdpPercap</code> are still long, and now our table is really sparse.</li>
</ul>
</section>
<section id="what-about-multiple-columns-1" class="slide level2">
<h2>What about <span class="fg-yellow"><em>multiple</em></span> columns?</h2>
<div class="smallcode">
<p>We need to specify that we want values from more than one column.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23" data-source-line-numbers="nil" data-code-line-numbers="3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, continent, year, lifeExp, gdpPercap) <span class="sc">|&gt;</span> </span>
<span id="cb23-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> <span class="fu">c</span>(lifeExp, gdpPercap)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 142 × 26
   country     continent lifeExp_1952 lifeExp_1957 lifeExp_1962 lifeExp_1967
   &lt;fct&gt;       &lt;fct&gt;            &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
 1 Afghanistan Asia              28.8         30.3         32.0         34.0
 2 Albania     Europe            55.2         59.3         64.8         66.2
 3 Algeria     Africa            43.1         45.7         48.3         51.4
 4 Angola      Africa            30.0         32.0         34           36.0
 5 Argentina   Americas          62.5         64.4         65.1         65.6
 6 Australia   Oceania           69.1         70.3         70.9         71.1
 7 Austria     Europe            66.8         67.5         69.5         70.1
 8 Bahrain     Asia              50.9         53.8         56.9         59.9
 9 Bangladesh  Asia              37.5         39.3         41.2         43.5
10 Belgium     Europe            68           69.2         70.2         70.9
# ℹ 132 more rows
# ℹ 20 more variables: lifeExp_1972 &lt;dbl&gt;, lifeExp_1977 &lt;dbl&gt;,
#   lifeExp_1982 &lt;dbl&gt;, lifeExp_1987 &lt;dbl&gt;, lifeExp_1992 &lt;dbl&gt;,
#   lifeExp_1997 &lt;dbl&gt;, lifeExp_2002 &lt;dbl&gt;, lifeExp_2007 &lt;dbl&gt;,
#   gdpPercap_1952 &lt;dbl&gt;, gdpPercap_1957 &lt;dbl&gt;, gdpPercap_1962 &lt;dbl&gt;,
#   gdpPercap_1967 &lt;dbl&gt;, gdpPercap_1972 &lt;dbl&gt;, gdpPercap_1977 &lt;dbl&gt;,
#   gdpPercap_1982 &lt;dbl&gt;, gdpPercap_1987 &lt;dbl&gt;, gdpPercap_1992 &lt;dbl&gt;, …</code></pre>
</div>
</div>
</div>
<ul>
<li>This will give us a very wide table, but it’s what we wanted.</li>
</ul>
</section>
<section id="pivot-wider-while-summarizing" class="slide level2">
<h2>Pivot wider while summarizing</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Some made-up data</span></span>
<span id="cb25-2"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"dfstrat.csv"</span>))</span>
<span id="cb25-3"><a aria-hidden="true" tabindex="-1"></a>dfstrat </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 1,000 × 5
   stratum sex   race  educ  income
     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
 1       6 F     W     HS      83.7
 2       5 F     W     BA     128. 
 3       3 F     B     HS      66.3
 4       3 F     W     HS     111. 
 5       6 M     W     BA     116. 
 6       7 M     B     HS     159. 
 7       8 M     W     BA     131. 
 8       3 M     W     BA      94.4
 9       7 F     B     HS     146. 
10       2 F     W     BA      88.8
# ℹ 990 more rows</code></pre>
</div>
</div>
<aside class="notes">
<p>Let’s say we want to transform this to a wider format, specifically by widening the educ column, so we end up with columns for both the HS and BA categories, and as we do so we want to calculate both the mean of income and the total n within each group.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="pivot-wider-while-summarizing-1" class="slide level2">
<h2>Pivot wider while summarizing</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"dfstrat.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">

</div></div>
</section>
<section id="pivot-wider-while-summarizing-2" class="slide level2">
<h2>Pivot wider while summarizing</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"dfstrat.csv"</span>))</span>
<span id="cb28-2"><a aria-hidden="true" tabindex="-1"></a>dfstrat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 1,000 × 5
   stratum sex   race  educ  income
     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
 1       6 F     W     HS      83.7
 2       5 F     W     BA     128. 
 3       3 F     B     HS      66.3
 4       3 F     W     HS     111. 
 5       6 M     W     BA     116. 
 6       7 M     B     HS     159. 
 7       8 M     W     BA     131. 
 8       3 M     W     BA      94.4
 9       7 F     B     HS     146. 
10       2 F     W     BA      88.8
# ℹ 990 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="pivot-wider-while-summarizing-3" class="slide level2">
<h2>Pivot wider while summarizing</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"dfstrat.csv"</span>))</span>
<span id="cb30-2"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(sex, race, stratum, educ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 1,000 × 5
# Groups:   sex, race, stratum, educ [64]
   stratum sex   race  educ  income
     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
 1       6 F     W     HS      83.7
 2       5 F     W     BA     128. 
 3       3 F     B     HS      66.3
 4       3 F     W     HS     111. 
 5       6 M     W     BA     116. 
 6       7 M     B     HS     159. 
 7       8 M     W     BA     131. 
 8       3 M     W     BA      94.4
 9       7 F     B     HS     146. 
10       2 F     W     BA      88.8
# ℹ 990 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="pivot-wider-while-summarizing-4" class="slide level2">
<h2>Pivot wider while summarizing</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"dfstrat.csv"</span>))</span>
<span id="cb32-2"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(sex, race, stratum, educ) <span class="sc">|&gt;</span></span>
<span id="cb32-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean_inc =</span> <span class="fu">mean</span>(income),</span>
<span id="cb32-5"><a aria-hidden="true" tabindex="-1"></a>              <span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 64 × 6
# Groups:   sex, race, stratum [32]
   sex   race  stratum educ  mean_inc     n
   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt;
 1 F     B           1 BA        93.8    19
 2 F     B           1 HS        99.3     6
 3 F     B           2 BA        89.7    11
 4 F     B           2 HS        93.0    16
 5 F     B           3 BA       112.     13
 6 F     B           3 HS        95.0    16
 7 F     B           4 BA       108.     14
 8 F     B           4 HS        96.1    15
 9 F     B           5 BA        91.0    11
10 F     B           5 HS        92.6    15
# ℹ 54 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="pivot-wider-while-summarizing-5" class="slide level2">
<h2>Pivot wider while summarizing</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"dfstrat.csv"</span>))</span>
<span id="cb34-2"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="sc">|&gt;</span></span>
<span id="cb34-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(sex, race, stratum, educ) <span class="sc">|&gt;</span></span>
<span id="cb34-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean_inc =</span> <span class="fu">mean</span>(income),</span>
<span id="cb34-5"><a aria-hidden="true" tabindex="-1"></a>              <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb34-6"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> (educ),</span>
<span id="cb34-7"><a aria-hidden="true" tabindex="-1"></a>                <span class="at">values_from =</span> <span class="fu">c</span>(mean_inc, n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 32 × 7
# Groups:   sex, race, stratum [32]
   sex   race  stratum mean_inc_BA mean_inc_HS  n_BA  n_HS
   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;int&gt; &lt;int&gt;
 1 F     B           1        93.8        99.3    19     6
 2 F     B           2        89.7        93.0    11    16
 3 F     B           3       112.         95.0    13    16
 4 F     B           4       108.         96.1    14    15
 5 F     B           5        91.0        92.6    11    15
 6 F     B           6        93.0       116.     15    15
 7 F     B           7       102.        121.     13    13
 8 F     B           8       105.         88.3    14     8
 9 F     W           1        92.6       110.     19    13
10 F     W           2        98.5       101.     15    19
# ℹ 22 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="pivot-wider-while-summarizing-6" class="slide level2">
<h2>Pivot wider while summarizing</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"dfstrat.csv"</span>))</span>
<span id="cb36-2"><a aria-hidden="true" tabindex="-1"></a>dfstrat <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(sex, race, stratum, educ) <span class="sc">|&gt;</span></span>
<span id="cb36-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean_inc =</span> <span class="fu">mean</span>(income),</span>
<span id="cb36-5"><a aria-hidden="true" tabindex="-1"></a>              <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb36-6"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> (educ),</span>
<span id="cb36-7"><a aria-hidden="true" tabindex="-1"></a>                <span class="at">values_from =</span> <span class="fu">c</span>(mean_inc, n)) <span class="sc">|&gt;</span></span>
<span id="cb36-8"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 32 × 7
   sex   race  stratum mean_inc_BA mean_inc_HS  n_BA  n_HS
   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt; &lt;int&gt; &lt;int&gt;
 1 F     B           1        93.8        99.3    19     6
 2 F     B           2        89.7        93.0    11    16
 3 F     B           3       112.         95.0    13    16
 4 F     B           4       108.         96.1    14    15
 5 F     B           5        91.0        92.6    11    15
 6 F     B           6        93.0       116.     15    15
 7 F     B           7       102.        121.     13    13
 8 F     B           8       105.         88.3    14     8
 9 F     W           1        92.6       110.     19    13
10 F     W           2        98.5       101.     15    19
# ℹ 22 more rows</code></pre>
</div>
</div>
</div></div>
<p>Here we end up with sex-by-race-by-stratum in the rows, and the income-by-education means, and income-by-education Ns, in their own columns.</p>
</section></section>
<section>
<section id="separate-and-unite" class="title-slide slide level1 inv-title center" data-background-color="#252F3E">
<h1>Separate and Unite</h1>

</section>
<section id="separate-and-unite-columns" class="slide level2">
<h2><span class="fg-green">separate()</span> and <span class="fg-green">unite()</span> columns</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a aria-hidden="true" tabindex="-1"></a><span class="do">## tribble() lets you make tibbles by hand</span></span>
<span id="cb38-2"><a aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb38-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>name, <span class="sc">~</span>occupation,</span>
<span id="cb38-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="st">"Nero.Wolfe"</span>, <span class="st">"Private Detective"</span>,</span>
<span id="cb38-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="st">"Archie.Goodwin"</span>, <span class="st">"Personal Assistant"</span>,</span>
<span id="cb38-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="st">"Fritz.Brenner"</span>, <span class="st">"Cook and Butler"</span>,</span>
<span id="cb38-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="st">"Theodore.Horstmann"</span>, <span class="st">"Orchid Expert"</span></span>
<span id="cb38-8"><a aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-9"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 2
  name               occupation        
  &lt;chr&gt;              &lt;chr&gt;             
1 Nero.Wolfe         Private Detective 
2 Archie.Goodwin     Personal Assistant
3 Fritz.Brenner      Cook and Butler   
4 Theodore.Horstmann Orchid Expert     </code></pre>
</div>
</div>
</section>
<section id="separate-and-unite-columns-1" class="slide level2">
<h2><span class="fg-green">separate()</span> and <span class="fg-green">unite()</span> columns</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a aria-hidden="true" tabindex="-1"></a><span class="do">## tribble() lets you make tibbles by hand</span></span>
<span id="cb40-2"><a aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb40-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>name, <span class="sc">~</span>occupation,</span>
<span id="cb40-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="st">"Nero.Wolfe"</span>, <span class="st">"Private Detective"</span>,</span>
<span id="cb40-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="st">"Archie.Goodwin"</span>, <span class="st">"Personal Assistant"</span>,</span>
<span id="cb40-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="st">"Fritz.Brenner"</span>, <span class="st">"Cook and Butler"</span>,</span>
<span id="cb40-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="st">"Theodore.Horstmann"</span>, <span class="st">"Orchid Expert"</span></span>
<span id="cb40-8"><a aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-9"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-10"><a aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 2
  name               occupation        
  &lt;chr&gt;              &lt;chr&gt;             
1 Nero.Wolfe         Private Detective 
2 Archie.Goodwin     Personal Assistant
3 Fritz.Brenner      Cook and Butler   
4 Theodore.Horstmann Orchid Expert     </code></pre>
</div>
</div>
</section>
<section id="separate-and-unite-1" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 2
  name               occupation        
  &lt;chr&gt;              &lt;chr&gt;             
1 Nero.Wolfe         Private Detective 
2 Archie.Goodwin     Personal Assistant
3 Fritz.Brenner      Cook and Butler   
4 Theodore.Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-2" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 3
  first    last      occupation        
  &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;             
1 Nero     Wolfe     Private Detective 
2 Archie   Goodwin   Personal Assistant
3 Fritz    Brenner   Cook and Butler   
4 Theodore Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-3" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb46-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"full_name"</span>, first<span class="sc">:</span>last, <span class="at">sep =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 2
  full_name          occupation        
  &lt;chr&gt;              &lt;chr&gt;             
1 Nero Wolfe         Private Detective 
2 Archie Goodwin     Personal Assistant
3 Fritz Brenner      Cook and Butler   
4 Theodore Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-4" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb48-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb48-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"full_name"</span>, first<span class="sc">:</span>last, <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb48-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"both_together"</span>, full_name<span class="sc">:</span>occupation,</span>
<span id="cb48-5"><a aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">", "</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 3
  both_together                      full_name          occupation        
  &lt;chr&gt;                              &lt;chr&gt;              &lt;chr&gt;             
1 Nero Wolfe, Private Detective      Nero Wolfe         Private Detective 
2 Archie Goodwin, Personal Assistant Archie Goodwin     Personal Assistant
3 Fritz Brenner, Cook and Butler     Fritz Brenner      Cook and Butler   
4 Theodore Horstmann, Orchid Expert  Theodore Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-5" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"full_name"</span>, first<span class="sc">:</span>last, <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb50-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"both_together"</span>, full_name<span class="sc">:</span>occupation,</span>
<span id="cb50-5"><a aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">", "</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 3
  both_together                      full_name          occupation        
  &lt;chr&gt;                              &lt;chr&gt;              &lt;chr&gt;             
1 Nero Wolfe, Private Detective      Nero Wolfe         Private Detective 
2 Archie Goodwin, Personal Assistant Archie Goodwin     Personal Assistant
3 Fritz Brenner, Cook and Butler     Fritz Brenner      Cook and Butler   
4 Theodore Horstmann, Orchid Expert  Theodore Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-6" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 2
  name               occupation        
  &lt;chr&gt;              &lt;chr&gt;             
1 Nero.Wolfe         Private Detective 
2 Archie.Goodwin     Personal Assistant
3 Fritz.Brenner      Cook and Butler   
4 Theodore.Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-7" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb54-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 3
  first    last      occupation        
  &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;             
1 Nero     Wolfe     Private Detective 
2 Archie   Goodwin   Personal Assistant
3 Fritz    Brenner   Cook and Butler   
4 Theodore Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-8" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"full_name"</span>, first<span class="sc">:</span>last)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 2
  full_name          occupation        
  &lt;chr&gt;              &lt;chr&gt;             
1 Nero_Wolfe         Private Detective 
2 Archie_Goodwin     Personal Assistant
3 Fritz_Brenner      Cook and Butler   
4 Theodore_Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-9" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb58-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb58-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"full_name"</span>, first<span class="sc">:</span>last) <span class="sc">|&gt;</span></span>
<span id="cb58-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(full_name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 3
  first    last      occupation        
  &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;             
1 Nero     Wolfe     Private Detective 
2 Archie   Goodwin   Personal Assistant
3 Fritz    Brenner   Cook and Butler   
4 Theodore Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-10" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb60-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb60-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"full_name"</span>, first<span class="sc">:</span>last) <span class="sc">|&gt;</span></span>
<span id="cb60-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(full_name, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"first"</span>, <span class="st">"last"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 4 × 3
  first    last      occupation        
  &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;             
1 Nero     Wolfe     Private Detective 
2 Archie   Goodwin   Personal Assistant
3 Fritz    Brenner   Cook and Butler   
4 Theodore Horstmann Orchid Expert     </code></pre>
</div>
</div>
</div></div>
<p>The underscore, <code>_</code>, is the default uniting character.</p>
</section>
<section id="separate-and-unite-11" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb62" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a aria-hidden="true" tabindex="-1"></a>gss_sm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,867 × 32
    year    id ballot       age childs sibs   degree race  sex   region income16
   &lt;dbl&gt; &lt;dbl&gt; &lt;labelled&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;labe&gt; &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt; &lt;fct&gt;  &lt;fct&gt;   
 1  2016     1 1             47      3 2      Bache… White Male  New E… $170000…
 2  2016     2 2             61      0 3      High … White Male  New E… $50000 …
 3  2016     3 3             72      2 3      Bache… White Male  New E… $75000 …
 4  2016     4 1             43      4 3      High … White Fema… New E… $170000…
 5  2016     5 3             55      2 2      Gradu… White Fema… New E… $170000…
 6  2016     6 2             53      2 2      Junio… White Fema… New E… $60000 …
 7  2016     7 1             50      2 2      High … White Male  New E… $170000…
 8  2016     8 3             23      3 6      High … Other Fema… Middl… $30000 …
 9  2016     9 1             45      3 5      High … Black Male  Middl… $60000 …
10  2016    10 3             71      4 1      Junio… White Male  Middl… $60000 …
# ℹ 2,857 more rows
# ℹ 21 more variables: relig &lt;fct&gt;, marital &lt;fct&gt;, padeg &lt;fct&gt;, madeg &lt;fct&gt;,
#   partyid &lt;fct&gt;, polviews &lt;fct&gt;, happy &lt;fct&gt;, partners &lt;fct&gt;, grass &lt;fct&gt;,
#   zodiac &lt;fct&gt;, pres12 &lt;labelled&gt;, wtssall &lt;dbl&gt;, income_rc &lt;fct&gt;,
#   agegrp &lt;fct&gt;, ageq &lt;fct&gt;, siblings &lt;fct&gt;, kids &lt;fct&gt;, religion &lt;fct&gt;,
#   bigregion &lt;fct&gt;, partners_rc &lt;fct&gt;, obama &lt;dbl&gt;</code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-12" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a aria-hidden="true" tabindex="-1"></a>gss_sm <span class="sc">|&gt;</span></span>
<span id="cb64-2"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(race, degree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,867 × 2
   race  degree        
   &lt;fct&gt; &lt;fct&gt;         
 1 White Bachelor      
 2 White High School   
 3 White Bachelor      
 4 White High School   
 5 White Graduate      
 6 White Junior College
 7 White High School   
 8 Other High School   
 9 Black High School   
10 White Junior College
# ℹ 2,857 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-13" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a aria-hidden="true" tabindex="-1"></a>gss_sm <span class="sc">|&gt;</span></span>
<span id="cb66-2"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(race, degree) <span class="sc">|&gt;</span></span>
<span id="cb66-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">racedeg =</span> <span class="fu">interaction</span>(race, degree))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,867 × 3
   race  degree         racedeg             
   &lt;fct&gt; &lt;fct&gt;          &lt;fct&gt;               
 1 White Bachelor       White.Bachelor      
 2 White High School    White.High School   
 3 White Bachelor       White.Bachelor      
 4 White High School    White.High School   
 5 White Graduate       White.Graduate      
 6 White Junior College White.Junior College
 7 White High School    White.High School   
 8 Other High School    Other.High School   
 9 Black High School    Black.High School   
10 White Junior College White.Junior College
# ℹ 2,857 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-14" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb68" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a aria-hidden="true" tabindex="-1"></a>gss_sm <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(race, degree) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">racedeg =</span> <span class="fu">interaction</span>(race, degree)) <span class="sc">|&gt;</span></span>
<span id="cb68-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(racedeg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,867 × 3
# Groups:   racedeg [16]
   race  degree         racedeg             
   &lt;fct&gt; &lt;fct&gt;          &lt;fct&gt;               
 1 White Bachelor       White.Bachelor      
 2 White High School    White.High School   
 3 White Bachelor       White.Bachelor      
 4 White High School    White.High School   
 5 White Graduate       White.Graduate      
 6 White Junior College White.Junior College
 7 White High School    White.High School   
 8 Other High School    Other.High School   
 9 Black High School    Black.High School   
10 White Junior College White.Junior College
# ℹ 2,857 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-15" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb70" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a aria-hidden="true" tabindex="-1"></a>gss_sm <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(race, degree) <span class="sc">|&gt;</span></span>
<span id="cb70-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">racedeg =</span> <span class="fu">interaction</span>(race, degree)) <span class="sc">|&gt;</span></span>
<span id="cb70-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(racedeg) <span class="sc">|&gt;</span></span>
<span id="cb70-5"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">tally</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 16 × 2
   racedeg                  n
   &lt;fct&gt;                &lt;int&gt;
 1 White.Lt High School   197
 2 Black.Lt High School    60
 3 Other.Lt High School    71
 4 White.High School     1057
 5 Black.High School      292
 6 Other.High School      112
 7 White.Junior College   166
 8 Black.Junior College    33
 9 Other.Junior College    17
10 White.Bachelor         426
11 Black.Bachelor          71
12 Other.Bachelor          39
13 White.Graduate         250
14 Black.Graduate          31
15 Other.Graduate          37
16 &lt;NA&gt;                     8</code></pre>
</div>
</div>
</div></div>
</section>
<section id="separate-and-unite-16" class="slide level2">
<h2>Separate and unite</h2>
<div class="columns smallcode">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb72" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a aria-hidden="true" tabindex="-1"></a>gss_sm <span class="sc">|&gt;</span></span>
<span id="cb72-2"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(race, degree) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">racedeg =</span> <span class="fu">interaction</span>(race, degree)) <span class="sc">|&gt;</span></span>
<span id="cb72-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(racedeg) <span class="sc">|&gt;</span></span>
<span id="cb72-5"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">tally</span>() <span class="sc">|&gt;</span></span>
<span id="cb72-6"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">separate</span>(racedeg, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"race"</span>, <span class="st">"degree"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 16 × 3
   race  degree             n
   &lt;chr&gt; &lt;chr&gt;          &lt;int&gt;
 1 White Lt High School   197
 2 Black Lt High School    60
 3 Other Lt High School    71
 4 White High School     1057
 5 Black High School      292
 6 Other High School      112
 7 White Junior College   166
 8 Black Junior College    33
 9 Other Junior College    17
10 White Bachelor         426
11 Black Bachelor          71
12 Other Bachelor          39
13 White Graduate         250
14 Black Graduate          31
15 Other Graduate          37
16 &lt;NA&gt;  &lt;NA&gt;               8</code></pre>
</div>
</div>
</div></div>
<p>This one is a bit trickier, and our first glimpse of a <em>regular expression</em>.</p>
<p>We have to tell <span class="fg-green"><strong><code>separate()</code></strong></span> to split on the period, not the space.</p>
</section></section>
<section>
<section id="more-advanced-pivots" class="title-slide slide level1 inv-title center" data-background-color="#252F3E">
<h1>More advanced pivots</h1>

</section>
<section id="example-tidy-selectors" class="slide level2">
<h2>Example: tidy selectors</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb74" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a aria-hidden="true" tabindex="-1"></a>billboard</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 317 × 79
   artist     track date.entered   wk1   wk2   wk3   wk4   wk5   wk6   wk7   wk8
   &lt;chr&gt;      &lt;chr&gt; &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 2 Pac      Baby… 2000-02-26      87    82    72    77    87    94    99    NA
 2 2Ge+her    The … 2000-09-02      91    87    92    NA    NA    NA    NA    NA
 3 3 Doors D… Kryp… 2000-04-08      81    70    68    67    66    57    54    53
 4 3 Doors D… Loser 2000-10-21      76    76    72    69    67    65    55    59
 5 504 Boyz   Wobb… 2000-04-15      57    34    25    17    17    31    36    49
 6 98^0       Give… 2000-08-19      51    39    34    26    26    19     2     2
 7 A*Teens    Danc… 2000-07-08      97    97    96    95   100    NA    NA    NA
 8 Aaliyah    I Do… 2000-01-29      84    62    51    41    38    35    35    38
 9 Aaliyah    Try … 2000-03-18      59    53    38    28    21    18    16    14
10 Adams, Yo… Open… 2000-08-26      76    76    74    69    68    67    61    58
# ℹ 307 more rows
# ℹ 68 more variables: wk9 &lt;dbl&gt;, wk10 &lt;dbl&gt;, wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;,
#   wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;, wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;,
#   wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;, wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;,
#   wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;, wk28 &lt;dbl&gt;, wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;,
#   wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;, wk34 &lt;dbl&gt;, wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;,
#   wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;, wk40 &lt;dbl&gt;, wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="example-tidy-selectors-1" class="slide level2">
<h2>Example: tidy selectors</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb76" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a aria-hidden="true" tabindex="-1"></a>billboard <span class="sc">|&gt;</span>  </span>
<span id="cb76-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb76-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"wk"</span>), </span>
<span id="cb76-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"week"</span>, </span>
<span id="cb76-5"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"rank"</span>,</span>
<span id="cb76-6"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">values_drop_na =</span> <span class="cn">TRUE</span></span>
<span id="cb76-7"><a aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 5,307 × 5
   artist  track                   date.entered week   rank
   &lt;chr&gt;   &lt;chr&gt;                   &lt;date&gt;       &lt;chr&gt; &lt;dbl&gt;
 1 2 Pac   Baby Don't Cry (Keep... 2000-02-26   wk1      87
 2 2 Pac   Baby Don't Cry (Keep... 2000-02-26   wk2      82
 3 2 Pac   Baby Don't Cry (Keep... 2000-02-26   wk3      72
 4 2 Pac   Baby Don't Cry (Keep... 2000-02-26   wk4      77
 5 2 Pac   Baby Don't Cry (Keep... 2000-02-26   wk5      87
 6 2 Pac   Baby Don't Cry (Keep... 2000-02-26   wk6      94
 7 2 Pac   Baby Don't Cry (Keep... 2000-02-26   wk7      99
 8 2Ge+her The Hardest Part Of ... 2000-09-02   wk1      91
 9 2Ge+her The Hardest Part Of ... 2000-09-02   wk2      87
10 2Ge+her The Hardest Part Of ... 2000-09-02   wk3      92
# ℹ 5,297 more rows</code></pre>
</div>
</div>
</section>
<section id="example-parse-fns" class="slide level2">
<h2>Example: parse fns</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb78" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a aria-hidden="true" tabindex="-1"></a>billboard  <span class="sc">|&gt;</span>  </span>
<span id="cb78-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb78-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"wk"</span>), </span>
<span id="cb78-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"week"</span>, </span>
<span id="cb78-5"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">names_transform =</span> readr<span class="sc">::</span>parse_number,</span>
<span id="cb78-6"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"rank"</span>,</span>
<span id="cb78-7"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>,</span>
<span id="cb78-8"><a aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 5,307 × 5
   artist  track                   date.entered  week  rank
   &lt;chr&gt;   &lt;chr&gt;                   &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 2 Pac   Baby Don't Cry (Keep... 2000-02-26       1    87
 2 2 Pac   Baby Don't Cry (Keep... 2000-02-26       2    82
 3 2 Pac   Baby Don't Cry (Keep... 2000-02-26       3    72
 4 2 Pac   Baby Don't Cry (Keep... 2000-02-26       4    77
 5 2 Pac   Baby Don't Cry (Keep... 2000-02-26       5    87
 6 2 Pac   Baby Don't Cry (Keep... 2000-02-26       6    94
 7 2 Pac   Baby Don't Cry (Keep... 2000-02-26       7    99
 8 2Ge+her The Hardest Part Of ... 2000-09-02       1    91
 9 2Ge+her The Hardest Part Of ... 2000-09-02       2    87
10 2Ge+her The Hardest Part Of ... 2000-09-02       3    92
# ℹ 5,297 more rows</code></pre>
</div>
</div>
</section>
<section id="example-many-vars-in-cols" class="slide level2">
<h2>Example: many vars in cols</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb80" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a aria-hidden="true" tabindex="-1"></a>who</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 7,240 × 60
   country  iso2  iso3   year new_sp_m014 new_sp_m1524 new_sp_m2534 new_sp_m3544
   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
 1 Afghani… AF    AFG    1980          NA           NA           NA           NA
 2 Afghani… AF    AFG    1981          NA           NA           NA           NA
 3 Afghani… AF    AFG    1982          NA           NA           NA           NA
 4 Afghani… AF    AFG    1983          NA           NA           NA           NA
 5 Afghani… AF    AFG    1984          NA           NA           NA           NA
 6 Afghani… AF    AFG    1985          NA           NA           NA           NA
 7 Afghani… AF    AFG    1986          NA           NA           NA           NA
 8 Afghani… AF    AFG    1987          NA           NA           NA           NA
 9 Afghani… AF    AFG    1988          NA           NA           NA           NA
10 Afghani… AF    AFG    1989          NA           NA           NA           NA
# ℹ 7,230 more rows
# ℹ 52 more variables: new_sp_m4554 &lt;dbl&gt;, new_sp_m5564 &lt;dbl&gt;,
#   new_sp_m65 &lt;dbl&gt;, new_sp_f014 &lt;dbl&gt;, new_sp_f1524 &lt;dbl&gt;,
#   new_sp_f2534 &lt;dbl&gt;, new_sp_f3544 &lt;dbl&gt;, new_sp_f4554 &lt;dbl&gt;,
#   new_sp_f5564 &lt;dbl&gt;, new_sp_f65 &lt;dbl&gt;, new_sn_m014 &lt;dbl&gt;,
#   new_sn_m1524 &lt;dbl&gt;, new_sn_m2534 &lt;dbl&gt;, new_sn_m3544 &lt;dbl&gt;,
#   new_sn_m4554 &lt;dbl&gt;, new_sn_m5564 &lt;dbl&gt;, new_sn_m65 &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="example-many-vars-in-cols-1" class="slide level2">
<h2>Example: many vars in cols</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb82" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a aria-hidden="true" tabindex="-1"></a>who  <span class="sc">|&gt;</span>  </span>
<span id="cb82-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb82-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> new_sp_m014<span class="sc">:</span>newrel_f65,</span>
<span id="cb82-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"diagnosis"</span>, <span class="st">"gender"</span>, <span class="st">"age"</span>), </span>
<span id="cb82-5"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"new_?(.*)_(.)(.*)"</span>,</span>
<span id="cb82-6"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"count"</span></span>
<span id="cb82-7"><a aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 405,440 × 8
   country     iso2  iso3   year diagnosis gender age   count
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
 1 Afghanistan AF    AFG    1980 sp        m      014      NA
 2 Afghanistan AF    AFG    1980 sp        m      1524     NA
 3 Afghanistan AF    AFG    1980 sp        m      2534     NA
 4 Afghanistan AF    AFG    1980 sp        m      3544     NA
 5 Afghanistan AF    AFG    1980 sp        m      4554     NA
 6 Afghanistan AF    AFG    1980 sp        m      5564     NA
 7 Afghanistan AF    AFG    1980 sp        m      65       NA
 8 Afghanistan AF    AFG    1980 sp        f      014      NA
 9 Afghanistan AF    AFG    1980 sp        f      1524     NA
10 Afghanistan AF    AFG    1980 sp        f      2534     NA
# ℹ 405,430 more rows</code></pre>
</div>
</div>
</section>
<section id="example-many-vars-in-cols-2" class="slide level2">
<h2>Example: many vars in cols</h2>
<div class="smallcode">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb84" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a aria-hidden="true" tabindex="-1"></a>who <span class="sc">|&gt;</span>  </span>
<span id="cb84-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb84-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> new_sp_m014<span class="sc">:</span>newrel_f65,</span>
<span id="cb84-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"diagnosis"</span>, <span class="st">"gender"</span>, <span class="st">"age"</span>), </span>
<span id="cb84-5"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">"new_?(.*)_(.)(.*)"</span>,</span>
<span id="cb84-6"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">names_transform =</span> <span class="fu">list</span>(</span>
<span id="cb84-7"><a aria-hidden="true" tabindex="-1"></a>      <span class="at">gender =</span> <span class="sc">~</span> readr<span class="sc">::</span><span class="fu">parse_factor</span>(.x, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"f"</span>, <span class="st">"m"</span>)),</span>
<span id="cb84-8"><a aria-hidden="true" tabindex="-1"></a>      <span class="at">age =</span> <span class="sc">~</span> readr<span class="sc">::</span><span class="fu">parse_factor</span>(</span>
<span id="cb84-9"><a aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb84-10"><a aria-hidden="true" tabindex="-1"></a>        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"014"</span>, <span class="st">"1524"</span>, <span class="st">"2534"</span>, <span class="st">"3544"</span>, <span class="st">"4554"</span>, <span class="st">"5564"</span>, <span class="st">"65"</span>), </span>
<span id="cb84-11"><a aria-hidden="true" tabindex="-1"></a>        <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb84-12"><a aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb84-13"><a aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb84-14"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"count"</span></span>
<span id="cb84-15"><a aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 405,440 × 8
   country     iso2  iso3   year diagnosis gender age   count
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;  &lt;ord&gt; &lt;dbl&gt;
 1 Afghanistan AF    AFG    1980 sp        m      014      NA
 2 Afghanistan AF    AFG    1980 sp        m      1524     NA
 3 Afghanistan AF    AFG    1980 sp        m      2534     NA
 4 Afghanistan AF    AFG    1980 sp        m      3544     NA
 5 Afghanistan AF    AFG    1980 sp        m      4554     NA
 6 Afghanistan AF    AFG    1980 sp        m      5564     NA
 7 Afghanistan AF    AFG    1980 sp        m      65       NA
 8 Afghanistan AF    AFG    1980 sp        f      014      NA
 9 Afghanistan AF    AFG    1980 sp        f      1524     NA
10 Afghanistan AF    AFG    1980 sp        f      2534     NA
# ℹ 405,430 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="example-long-to-wide" class="slide level2">
<h2>Example: long to wide</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb86" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a aria-hidden="true" tabindex="-1"></a><span class="do">## Get the data and normalize the column names</span></span>
<span id="cb86-2"><a aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"http://kjhealy.co/MVOtestdata.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb86-3"><a aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb86-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-5"><a aria-hidden="true" tabindex="-1"></a><span class="do">## Starting point</span></span>
<span id="cb86-6"><a aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 26 × 11
        id date       wheelies right_shoe_color right_shoe_size left_shoe_color
     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;                      &lt;dbl&gt; &lt;chr&gt;          
 1 8675309 2/1/2009   no       &lt;NA&gt;                          NA &lt;NA&gt;           
 2 8675309 2/4/2014   no       &lt;NA&gt;                          NA &lt;NA&gt;           
 3 8675309 2/15/2006  no       none                          NA none           
 4 8675309 3/1/2009   no       none                          NA &lt;NA&gt;           
 5 8675309 4/20/2013  no       white                         NA &lt;NA&gt;           
 6 8675309 4/30/2010  &lt;NA&gt;     white                          3 white          
 7 8675309 5/5/2012   no       &lt;NA&gt;                          NA &lt;NA&gt;           
 8 8675309 7/31/2009  no       &lt;NA&gt;                          NA none           
 9 8675309 10/22/2008 no       &lt;NA&gt;                          NA none           
10 9021033 1/11/2005  no       white                          5 orange         
# ℹ 16 more rows
# ℹ 5 more variables: left_shoe_size &lt;dbl&gt;, right_glove_color &lt;chr&gt;,
#   right_glove_size &lt;dbl&gt;, left_glove_color &lt;chr&gt;, left_glove_size &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="example-long-to-wide-1" class="slide level2">
<h2>Example: long to wide</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb88" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code> [1] "id"                "date"              "wheelies"         
 [4] "right_shoe_color"  "right_shoe_size"   "left_shoe_color"  
 [7] "left_shoe_size"    "right_glove_color" "right_glove_size" 
[10] "left_glove_color"  "left_glove_size"  </code></pre>
</div>
</div>
</section>
<section id="example-there-back" class="slide level2">
<h2>Example: there &amp; back</h2>
<p>More fully lengthen by making side, item, color, and size into variables (ie columns)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb90" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a aria-hidden="true" tabindex="-1"></a>df_lon <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb90-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(right_shoe_color<span class="sc">:</span>left_glove_size,</span>
<span id="cb90-3"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"side"</span>, <span class="st">"item"</span>, <span class="st">".value"</span>),</span>
<span id="cb90-4"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">names_pattern =</span> <span class="st">"(.*)_(.*)_(.*)"</span>)</span>
<span id="cb90-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-6"><a aria-hidden="true" tabindex="-1"></a>df_lon</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 104 × 7
        id date      wheelies side  item  color  size
     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;
 1 8675309 2/1/2009  no       right shoe  &lt;NA&gt;     NA
 2 8675309 2/1/2009  no       left  shoe  &lt;NA&gt;     NA
 3 8675309 2/1/2009  no       right glove &lt;NA&gt;      3
 4 8675309 2/1/2009  no       left  glove &lt;NA&gt;      1
 5 8675309 2/4/2014  no       right shoe  &lt;NA&gt;     NA
 6 8675309 2/4/2014  no       left  shoe  &lt;NA&gt;      1
 7 8675309 2/4/2014  no       right glove &lt;NA&gt;     NA
 8 8675309 2/4/2014  no       left  glove &lt;NA&gt;     NA
 9 8675309 2/15/2006 no       right shoe  none     NA
10 8675309 2/15/2006 no       left  shoe  none     NA
# ℹ 94 more rows</code></pre>
</div>
</div>
</section>
<section id="example-there-back-1" class="slide level2">
<h2>Example: there &amp; back</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb92" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a aria-hidden="true" tabindex="-1"></a>df_superwide <span class="ot">&lt;-</span> df_lon <span class="sc">|&gt;</span></span>
<span id="cb92-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id, date) <span class="sc">|&gt;</span></span>
<span id="cb92-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">as.character</span>(id),</span>
<span id="cb92-4"><a aria-hidden="true" tabindex="-1"></a>         <span class="at">date =</span> lubridate<span class="sc">::</span><span class="fu">mdy</span>(date),</span>
<span id="cb92-5"><a aria-hidden="true" tabindex="-1"></a>         <span class="at">seq_id =</span> <span class="fu">cur_group_rows</span>()) <span class="sc">|&gt;</span></span>
<span id="cb92-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(seq_id, <span class="at">.after =</span> id) <span class="sc">|&gt;</span></span>
<span id="cb92-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb92-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> seq_id, <span class="at">values_from =</span>  date<span class="sc">:</span>size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="example-there-back-2" class="slide level2">
<h2>Example: there &amp; back</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb93" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a aria-hidden="true" tabindex="-1"></a>df_superwide</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 3 × 625
  id      date_1     date_2     date_3     date_4     date_5     date_6    
  &lt;chr&gt;   &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    
1 8675309 2009-02-01 2009-02-01 2009-02-01 2009-02-01 2014-02-04 2014-02-04
2 9021033 NA         NA         NA         NA         NA         NA        
3 1234567 NA         NA         NA         NA         NA         NA        
# ℹ 618 more variables: date_7 &lt;date&gt;, date_8 &lt;date&gt;, date_9 &lt;date&gt;,
#   date_10 &lt;date&gt;, date_11 &lt;date&gt;, date_12 &lt;date&gt;, date_13 &lt;date&gt;,
#   date_14 &lt;date&gt;, date_15 &lt;date&gt;, date_16 &lt;date&gt;, date_17 &lt;date&gt;,
#   date_18 &lt;date&gt;, date_19 &lt;date&gt;, date_20 &lt;date&gt;, date_21 &lt;date&gt;,
#   date_22 &lt;date&gt;, date_23 &lt;date&gt;, date_24 &lt;date&gt;, date_25 &lt;date&gt;,
#   date_26 &lt;date&gt;, date_27 &lt;date&gt;, date_28 &lt;date&gt;, date_29 &lt;date&gt;,
#   date_30 &lt;date&gt;, date_31 &lt;date&gt;, date_32 &lt;date&gt;, date_33 &lt;date&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Sheer madness</span></span>
<span id="cb95-2"><a aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_superwide)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code>  [1] "id"      "date_1"  "date_2"  "date_3"  "date_4"  "date_5"  "date_6" 
  [8] "date_7"  "date_8"  "date_9"  "date_10" "date_11" "date_12" "date_13"
 [15] "date_14" "date_15" "date_16" "date_17" "date_18" "date_19" "date_20"
 [22] "date_21" "date_22" "date_23" "date_24" "date_25" "date_26" "date_27"
 [29] "date_28" "date_29" "date_30" "date_31" "date_32" "date_33" "date_34"
 [36] "date_35" "date_36" "date_37" "date_38" "date_39" "date_40" "date_41"
 [43] "date_42" "date_43" "date_44" "date_45" "date_46" "date_47" "date_48"
 [50] "date_49" "date_50" "date_51" "date_52" "date_53" "date_54" "date_55"
 [57] "date_56" "date_57" "date_58" "date_59" "date_60" "date_61" "date_62"
 [64] "date_63" "date_64" "date_65" "date_66" "date_67" "date_68" "date_69"
 [71] "date_70" "date_71" "date_72" "date_73" "date_74" "date_75" "date_76"
 [78] "date_77" "date_78" "date_79" "date_80" "date_81" "date_82" "date_83"
 [85] "date_84" "date_85" "date_86" "date_87" "date_88" "date_89" "date_90"
 [92] "date_91" "date_92" "date_93" "date_94" "date_95" "date_96" "date_97"
 [99] "date_98" "date_99"
 [ reached getOption("max.print") -- omitted 525 entries ]</code></pre>
</div>
</div>
</section></section>
<section>
<section id="nested-data" class="title-slide slide level1 inv-title center" data-background-color="#252F3E">
<h1>Nested Data</h1>

</section>
<section id="example-1-from-the-tidyr-vignette" class="slide level2">
<h2>Example 1: from the <code>tidyr</code> Vignette</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb97" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a aria-hidden="true" tabindex="-1"></a><span class="do">## Examples of recursive lists and nested/split data frames</span></span>
<span id="cb97-2"><a aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("repurrsive")</span></span>
<span id="cb97-3"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(repurrrsive)</span>
<span id="cb97-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a aria-hidden="true" tabindex="-1"></a>chars <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">char =</span> got_chars)</span>
<span id="cb97-6"><a aria-hidden="true" tabindex="-1"></a>chars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 1
   char             
   &lt;list&gt;           
 1 &lt;named list [18]&gt;
 2 &lt;named list [18]&gt;
 3 &lt;named list [18]&gt;
 4 &lt;named list [18]&gt;
 5 &lt;named list [18]&gt;
 6 &lt;named list [18]&gt;
 7 &lt;named list [18]&gt;
 8 &lt;named list [18]&gt;
 9 &lt;named list [18]&gt;
10 &lt;named list [18]&gt;
# ℹ 20 more rows</code></pre>
</div>
</div>
</section>
<section id="example-1-from-the-tidyr-vignette-1" class="slide level2">
<h2>Example 1: from the <code>tidyr</code> Vignette</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb99" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a aria-hidden="true" tabindex="-1"></a>chars2 <span class="ot">&lt;-</span> chars <span class="sc">|&gt;</span> </span>
<span id="cb99-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(char)</span>
<span id="cb99-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-4"><a aria-hidden="true" tabindex="-1"></a>chars2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 18
   url           id name  gender culture born  died  alive titles aliases father
   &lt;chr&gt;      &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;list&gt; &lt;list&gt;  &lt;chr&gt; 
 1 https://w…  1022 Theo… Male   "Ironb… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 2 https://w…  1052 Tyri… Male   ""      "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 3 https://w…  1074 Vict… Male   "Ironb… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 4 https://w…  1109 Will  Male   ""      ""    "In … FALSE &lt;chr&gt;  &lt;chr&gt;   ""    
 5 https://w…  1166 Areo… Male   "Norvo… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 6 https://w…  1267 Chett Male   ""      "At … "In … FALSE &lt;chr&gt;  &lt;chr&gt;   ""    
 7 https://w…  1295 Cres… Male   ""      "In … "In … FALSE &lt;chr&gt;  &lt;chr&gt;   ""    
 8 https://w…   130 Aria… Female "Dorni… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 9 https://w…  1303 Daen… Female "Valyr… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
10 https://w…  1319 Davo… Male   "Weste… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
# ℹ 20 more rows
# ℹ 7 more variables: mother &lt;chr&gt;, spouse &lt;chr&gt;, allegiances &lt;list&gt;,
#   books &lt;list&gt;, povBooks &lt;list&gt;, tvSeries &lt;list&gt;, playedBy &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="example-1-from-the-tidyr-vignette-2" class="slide level2">
<h2>Example 1: from the <code>tidyr</code> Vignette</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb101" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a aria-hidden="true" tabindex="-1"></a>chars2 <span class="sc">|&gt;</span> </span>
<span id="cb101-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.list))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 7
   titles    aliases    allegiances books     povBooks  tvSeries  playedBy 
   &lt;list&gt;    &lt;list&gt;     &lt;list&gt;      &lt;list&gt;    &lt;list&gt;    &lt;list&gt;    &lt;list&gt;   
 1 &lt;chr [2]&gt; &lt;chr [4]&gt;  &lt;chr [1]&gt;   &lt;chr [3]&gt; &lt;chr [2]&gt; &lt;chr [6]&gt; &lt;chr [1]&gt;
 2 &lt;chr [2]&gt; &lt;chr [11]&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt; &lt;chr [4]&gt; &lt;chr [6]&gt; &lt;chr [1]&gt;
 3 &lt;chr [2]&gt; &lt;chr [1]&gt;  &lt;chr [1]&gt;   &lt;chr [3]&gt; &lt;chr [2]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
 4 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;NULL&gt;      &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
 5 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;chr [1]&gt;   &lt;chr [3]&gt; &lt;chr [2]&gt; &lt;chr [2]&gt; &lt;chr [1]&gt;
 6 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;NULL&gt;      &lt;chr [2]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
 7 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;NULL&gt;      &lt;chr [2]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
 8 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;chr [1]&gt;   &lt;chr [4]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;
 9 &lt;chr [5]&gt; &lt;chr [11]&gt; &lt;chr [1]&gt;   &lt;chr [1]&gt; &lt;chr [4]&gt; &lt;chr [6]&gt; &lt;chr [1]&gt;
10 &lt;chr [4]&gt; &lt;chr [5]&gt;  &lt;chr [2]&gt;   &lt;chr [1]&gt; &lt;chr [3]&gt; &lt;chr [5]&gt; &lt;chr [1]&gt;
# ℹ 20 more rows</code></pre>
</div>
</div>
</section>
<section id="example-1-from-the-tidyr-vignette-3" class="slide level2">
<h2>Example 1: from the <code>tidyr</code> Vignette</h2>
<p>A row for every book and TV series that the character appears in:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb103" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a aria-hidden="true" tabindex="-1"></a>chars2 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 18
   url           id name  gender culture born  died  alive titles aliases father
   &lt;chr&gt;      &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;list&gt; &lt;list&gt;  &lt;chr&gt; 
 1 https://w…  1022 Theo… Male   "Ironb… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 2 https://w…  1052 Tyri… Male   ""      "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 3 https://w…  1074 Vict… Male   "Ironb… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 4 https://w…  1109 Will  Male   ""      ""    "In … FALSE &lt;chr&gt;  &lt;chr&gt;   ""    
 5 https://w…  1166 Areo… Male   "Norvo… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 6 https://w…  1267 Chett Male   ""      "At … "In … FALSE &lt;chr&gt;  &lt;chr&gt;   ""    
 7 https://w…  1295 Cres… Male   ""      "In … "In … FALSE &lt;chr&gt;  &lt;chr&gt;   ""    
 8 https://w…   130 Aria… Female "Dorni… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 9 https://w…  1303 Daen… Female "Valyr… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
10 https://w…  1319 Davo… Male   "Weste… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
# ℹ 20 more rows
# ℹ 7 more variables: mother &lt;chr&gt;, spouse &lt;chr&gt;, allegiances &lt;list&gt;,
#   books &lt;list&gt;, povBooks &lt;list&gt;, tvSeries &lt;list&gt;, playedBy &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="example-1-vignette" class="slide level2">
<h2>Example 1: Vignette</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb105" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a aria-hidden="true" tabindex="-1"></a>chars2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 18
   url           id name  gender culture born  died  alive titles aliases father
   &lt;chr&gt;      &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;list&gt; &lt;list&gt;  &lt;chr&gt; 
 1 https://w…  1022 Theo… Male   "Ironb… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 2 https://w…  1052 Tyri… Male   ""      "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 3 https://w…  1074 Vict… Male   "Ironb… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 4 https://w…  1109 Will  Male   ""      ""    "In … FALSE &lt;chr&gt;  &lt;chr&gt;   ""    
 5 https://w…  1166 Areo… Male   "Norvo… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 6 https://w…  1267 Chett Male   ""      "At … "In … FALSE &lt;chr&gt;  &lt;chr&gt;   ""    
 7 https://w…  1295 Cres… Male   ""      "In … "In … FALSE &lt;chr&gt;  &lt;chr&gt;   ""    
 8 https://w…   130 Aria… Female "Dorni… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
 9 https://w…  1303 Daen… Female "Valyr… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
10 https://w…  1319 Davo… Male   "Weste… "In … ""    TRUE  &lt;chr&gt;  &lt;chr&gt;   ""    
# ℹ 20 more rows
# ℹ 7 more variables: mother &lt;chr&gt;, spouse &lt;chr&gt;, allegiances &lt;list&gt;,
#   books &lt;list&gt;, povBooks &lt;list&gt;, tvSeries &lt;list&gt;, playedBy &lt;list&gt;</code></pre>
</div>
</div>
</div></div>
</section>
<section id="example-1-vignette-1" class="slide level2">
<h2>Example 1: Vignette</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb107" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a aria-hidden="true" tabindex="-1"></a>chars2  <span class="sc">|&gt;</span></span>
<span id="cb107-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, books, tvSeries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 3
   name               books     tvSeries 
   &lt;chr&gt;              &lt;list&gt;    &lt;list&gt;   
 1 Theon Greyjoy      &lt;chr [3]&gt; &lt;chr [6]&gt;
 2 Tyrion Lannister   &lt;chr [2]&gt; &lt;chr [6]&gt;
 3 Victarion Greyjoy  &lt;chr [3]&gt; &lt;chr [1]&gt;
 4 Will               &lt;chr [1]&gt; &lt;chr [1]&gt;
 5 Areo Hotah         &lt;chr [3]&gt; &lt;chr [2]&gt;
 6 Chett              &lt;chr [2]&gt; &lt;chr [1]&gt;
 7 Cressen            &lt;chr [2]&gt; &lt;chr [1]&gt;
 8 Arianne Martell    &lt;chr [4]&gt; &lt;chr [1]&gt;
 9 Daenerys Targaryen &lt;chr [1]&gt; &lt;chr [6]&gt;
10 Davos Seaworth     &lt;chr [1]&gt; &lt;chr [5]&gt;
# ℹ 20 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="example-1-vignette-2" class="slide level2">
<h2>Example 1: Vignette</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb109" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a aria-hidden="true" tabindex="-1"></a>chars2  <span class="sc">|&gt;</span></span>
<span id="cb109-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, books, tvSeries) <span class="sc">|&gt;</span></span>
<span id="cb109-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(books, tvSeries),</span>
<span id="cb109-4"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"media"</span>,</span>
<span id="cb109-5"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 60 × 3
   name              media    value    
   &lt;chr&gt;             &lt;chr&gt;    &lt;list&gt;   
 1 Theon Greyjoy     books    &lt;chr [3]&gt;
 2 Theon Greyjoy     tvSeries &lt;chr [6]&gt;
 3 Tyrion Lannister  books    &lt;chr [2]&gt;
 4 Tyrion Lannister  tvSeries &lt;chr [6]&gt;
 5 Victarion Greyjoy books    &lt;chr [3]&gt;
 6 Victarion Greyjoy tvSeries &lt;chr [1]&gt;
 7 Will              books    &lt;chr [1]&gt;
 8 Will              tvSeries &lt;chr [1]&gt;
 9 Areo Hotah        books    &lt;chr [3]&gt;
10 Areo Hotah        tvSeries &lt;chr [2]&gt;
# ℹ 50 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="example-1-vignette-3" class="slide level2">
<h2>Example 1: Vignette</h2>
<div class="columns smallcode">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb111" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a aria-hidden="true" tabindex="-1"></a>chars2  <span class="sc">|&gt;</span></span>
<span id="cb111-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, books, tvSeries) <span class="sc">|&gt;</span></span>
<span id="cb111-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(books, tvSeries),</span>
<span id="cb111-4"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"media"</span>,</span>
<span id="cb111-5"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_longer</span>(value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 179 × 3
   name             media    value            
   &lt;chr&gt;            &lt;chr&gt;    &lt;chr&gt;            
 1 Theon Greyjoy    books    A Game of Thrones
 2 Theon Greyjoy    books    A Storm of Swords
 3 Theon Greyjoy    books    A Feast for Crows
 4 Theon Greyjoy    tvSeries Season 1         
 5 Theon Greyjoy    tvSeries Season 2         
 6 Theon Greyjoy    tvSeries Season 3         
 7 Theon Greyjoy    tvSeries Season 4         
 8 Theon Greyjoy    tvSeries Season 5         
 9 Theon Greyjoy    tvSeries Season 6         
10 Tyrion Lannister books    A Feast for Crows
# ℹ 169 more rows</code></pre>
</div>
</div>
</div></div>
</section>
<section id="example-2-github" class="slide level2">
<h2>Example 2: GitHub</h2>
<p>The <code>fromJSON()</code> function in <code>{jsonlite}</code> does its best to simplify what the API returns into a table, which you can convert to a tibble.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb113" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("jsonlite")</span></span>
<span id="cb113-2"><a aria-hidden="true" tabindex="-1"></a>jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(<span class="st">"https://api.github.com/users/kjhealy/repos"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb113-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 79
       id node_id name  full_name private owner$login html_url description fork 
    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;     &lt;lgl&gt;   &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;       &lt;lgl&gt;
 1 4.37e8 R_kgDO… .doo… kjhealy/… FALSE   kjhealy     https:/… Doom Emacs… FALSE
 2 5.37e7 MDEwOl… 2016… kjhealy/… FALSE   kjhealy     https:/… &lt;NA&gt;        TRUE 
 3 5.10e6 MDEwOl… 5by5… kjhealy/… FALSE   kjhealy     https:/… Data and R… FALSE
 4 7.63e8 R_kgDO… abor… kjhealy/… FALSE   kjhealy     https:/… &lt;NA&gt;        FALSE
 5 3.48e7 MDEwOl… apple kjhealy/… FALSE   kjhealy     https:/… Trend plot… FALSE
 6 2.59e8 MDEwOl… appl… kjhealy/… FALSE   kjhealy     https:/… &lt;NA&gt;        FALSE
 7 1.56e6 MDEwOl… asa-… kjhealy/… FALSE   kjhealy     https:/… Comparativ… FALSE
 8 4.65e7 MDEwOl… asa-… kjhealy/… FALSE   kjhealy     https:/… Some plots… FALSE
 9 1.49e8 MDEwOl… asa_… kjhealy/… FALSE   kjhealy     https:/… &lt;NA&gt;        FALSE
10 8.83e7 MDEwOl… asdf… kjhealy/… FALSE   kjhealy     https:/… analyze su… TRUE 
# ℹ 20 more rows
# ℹ 87 more variables: owner$id &lt;int&gt;, $node_id &lt;chr&gt;, $avatar_url &lt;chr&gt;,
#   $gravatar_id &lt;chr&gt;, $url &lt;chr&gt;, $html_url &lt;chr&gt;, $followers_url &lt;chr&gt;,
#   $following_url &lt;chr&gt;, $gists_url &lt;chr&gt;, $starred_url &lt;chr&gt;,
#   $subscriptions_url &lt;chr&gt;, $organizations_url &lt;chr&gt;, $repos_url &lt;chr&gt;,
#   $events_url &lt;chr&gt;, $received_events_url &lt;chr&gt;, $type &lt;chr&gt;,
#   $site_admin &lt;lgl&gt;, url &lt;chr&gt;, forks_url &lt;chr&gt;, keys_url &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
<section id="example-2-github-1" class="slide level2">
<h2>Example 2: GitHub</h2>
<p>The <code>read_json()</code> function in <code>{jsonlite}</code> gives you a list of the JSON the API returns, which you won’t be able to immediately convert.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb115" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a aria-hidden="true" tabindex="-1"></a>gh_raw <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="st">"https://api.github.com/users/kjhealy/repos"</span>) </span>
<span id="cb115-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-3"><a aria-hidden="true" tabindex="-1"></a>gh_tb <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">gh =</span> gh_raw)</span>
<span id="cb115-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-5"><a aria-hidden="true" tabindex="-1"></a>gh_tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 1
   gh               
   &lt;list&gt;           
 1 &lt;named list [79]&gt;
 2 &lt;named list [79]&gt;
 3 &lt;named list [79]&gt;
 4 &lt;named list [79]&gt;
 5 &lt;named list [79]&gt;
 6 &lt;named list [79]&gt;
 7 &lt;named list [79]&gt;
 8 &lt;named list [79]&gt;
 9 &lt;named list [79]&gt;
10 &lt;named list [79]&gt;
# ℹ 20 more rows</code></pre>
</div>
</div>
</section>
<section id="example-2-github-2" class="slide level2">
<h2>Example 2: GitHub</h2>
<p>This is what the <code>unnest_wider()</code> function is for:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb117" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a aria-hidden="true" tabindex="-1"></a>gh_tb <span class="sc">|&gt;</span> </span>
<span id="cb117-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(gh)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 79
          id node_id   name  full_name private owner        html_url description
       &lt;int&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;     &lt;lgl&gt;   &lt;list&gt;       &lt;chr&gt;    &lt;chr&gt;      
 1 436805268 R_kgDOGg… .doo… kjhealy/… FALSE   &lt;named list&gt; https:/… Doom Emacs…
 2  53698061 MDEwOlJl… 2016… kjhealy/… FALSE   &lt;named list&gt; https:/… &lt;NA&gt;       
 3   5103336 MDEwOlJl… 5by5… kjhealy/… FALSE   &lt;named list&gt; https:/… Data and R…
 4 762813356 R_kgDOLX… abor… kjhealy/… FALSE   &lt;named list&gt; https:/… &lt;NA&gt;       
 5  34824505 MDEwOlJl… apple kjhealy/… FALSE   &lt;named list&gt; https:/… Trend plot…
 6 259012888 MDEwOlJl… appl… kjhealy/… FALSE   &lt;named list&gt; https:/… &lt;NA&gt;       
 7   1555513 MDEwOlJl… asa-… kjhealy/… FALSE   &lt;named list&gt; https:/… Comparativ…
 8  46535044 MDEwOlJl… asa-… kjhealy/… FALSE   &lt;named list&gt; https:/… Some plots…
 9 148529869 MDEwOlJl… asa_… kjhealy/… FALSE   &lt;named list&gt; https:/… &lt;NA&gt;       
10  88295797 MDEwOlJl… asdf… kjhealy/… FALSE   &lt;named list&gt; https:/… analyze su…
# ℹ 20 more rows
# ℹ 71 more variables: fork &lt;lgl&gt;, url &lt;chr&gt;, forks_url &lt;chr&gt;, keys_url &lt;chr&gt;,
#   collaborators_url &lt;chr&gt;, teams_url &lt;chr&gt;, hooks_url &lt;chr&gt;,
#   issue_events_url &lt;chr&gt;, events_url &lt;chr&gt;, assignees_url &lt;chr&gt;,
#   branches_url &lt;chr&gt;, tags_url &lt;chr&gt;, blobs_url &lt;chr&gt;, git_tags_url &lt;chr&gt;,
#   git_refs_url &lt;chr&gt;, trees_url &lt;chr&gt;, statuses_url &lt;chr&gt;,
#   languages_url &lt;chr&gt;, stargazers_url &lt;chr&gt;, contributors_url &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
<section id="example-2-github-3" class="slide level2">
<h2>Example 2: GitHub</h2>
<p>By default we only get the first 30 items back. (The API is paginated.)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb119" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a aria-hidden="true" tabindex="-1"></a>gh_tb <span class="sc">|&gt;</span> </span>
<span id="cb119-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(gh) <span class="sc">|&gt;</span></span>
<span id="cb119-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code> [1] ".doom.d"                             "2016-03-wapo-uber"                  
 [3] "5by5-figures"                        "abortion_gss"                       
 [5] "apple"                               "apple_covid_post"                   
 [7] "asa-dues"                            "asa-sections"                       
 [9] "asa_sections17"                      "asdfree"                            
[11] "assault-2023"                        "assault-deaths"                     
[13] "atpfm"                               "babcock-ratings"                    
[15] "bass_graphs"                         "bepsays.com"                        
[17] "bib"                                 "bookdown"                           
[19] "bookdown-demo"                       "boom"                               
[21] "boomers"                             "bootstrap"                          
[23] "canmap"                              "cavax"                              
[25] "cbofigure"                           "cdccovidview"                       
[27] "congress"                            "corr_example"                       
[29] "County_Level_Election_Results_12-16" "course_template"                    </code></pre>
</div>
</div>
</section>
<section id="example-2-github-4" class="slide level2">
<h2>Example 2: GitHub</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb121" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a aria-hidden="true" tabindex="-1"></a>gh_tb <span class="sc">|&gt;</span> </span>
<span id="cb121-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(gh) <span class="sc">|&gt;</span></span>
<span id="cb121-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, name, <span class="fu">ends_with</span>(<span class="st">"count"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb121-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(watchers_count))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 30 × 6
          id name  stargazers_count watchers_count forks_count open_issues_count
       &lt;int&gt; &lt;chr&gt;            &lt;int&gt;          &lt;int&gt;       &lt;int&gt;             &lt;int&gt;
 1  34824505 apple               28             28          27                 0
 2 233082941 cour…               17             17           3                 0
 3 259012888 appl…               14             14           4                 1
 4   5249003 assa…               11             11           4                 0
 5 128972396 boom                 9              9           1                 0
 6    114724 bib                  7              7           2                 0
 7 621306299 assa…                6              6           0                 0
 8 160963411 canm…                5              5           2                 0
 9 216038719 cong…                4              4           0                 0
10 148529869 asa_…                2              2           1                 0
# ℹ 20 more rows</code></pre>
</div>
</div>
</section>
<section id="example-3-citibike-nyc" class="slide level2">
<h2>Example 3: Citibike NYC</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb123" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a aria-hidden="true" tabindex="-1"></a>bikes <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="st">"https://gbfs.citibikenyc.com/gbfs/2.3/gbfs.json"</span>)</span>
<span id="cb123-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a aria-hidden="true" tabindex="-1"></a>bikes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code>$data
$data$en
$data$en$feeds
$data$en$feeds[[1]]
$data$en$feeds[[1]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/gbfs.json"

$data$en$feeds[[1]]$name
[1] "gbfs"


$data$en$feeds[[2]]
$data$en$feeds[[2]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_information.json"

$data$en$feeds[[2]]$name
[1] "system_information"


$data$en$feeds[[3]]
$data$en$feeds[[3]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/station_information.json"

$data$en$feeds[[3]]$name
[1] "station_information"


$data$en$feeds[[4]]
$data$en$feeds[[4]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/station_status.json"

$data$en$feeds[[4]]$name
[1] "station_status"


$data$en$feeds[[5]]
$data$en$feeds[[5]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/free_bike_status.json"

$data$en$feeds[[5]]$name
[1] "free_bike_status"


$data$en$feeds[[6]]
$data$en$feeds[[6]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_hours.json"

$data$en$feeds[[6]]$name
[1] "system_hours"


$data$en$feeds[[7]]
$data$en$feeds[[7]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_calendar.json"

$data$en$feeds[[7]]$name
[1] "system_calendar"


$data$en$feeds[[8]]
$data$en$feeds[[8]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_regions.json"

$data$en$feeds[[8]]$name
[1] "system_regions"


$data$en$feeds[[9]]
$data$en$feeds[[9]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_pricing_plans.json"

$data$en$feeds[[9]]$name
[1] "system_pricing_plans"


$data$en$feeds[[10]]
$data$en$feeds[[10]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_alerts.json"

$data$en$feeds[[10]]$name
[1] "system_alerts"


$data$en$feeds[[11]]
$data$en$feeds[[11]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/gbfs_versions.json"

$data$en$feeds[[11]]$name
[1] "gbfs_versions"


$data$en$feeds[[12]]
$data$en$feeds[[12]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/en/vehicle_types.json"

$data$en$feeds[[12]]$name
[1] "vehicle_types"




$data$fr
$data$fr$feeds
$data$fr$feeds[[1]]
$data$fr$feeds[[1]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/gbfs.json"

$data$fr$feeds[[1]]$name
[1] "gbfs"


$data$fr$feeds[[2]]
$data$fr$feeds[[2]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/system_information.json"

$data$fr$feeds[[2]]$name
[1] "system_information"


$data$fr$feeds[[3]]
$data$fr$feeds[[3]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/station_information.json"

$data$fr$feeds[[3]]$name
[1] "station_information"


$data$fr$feeds[[4]]
$data$fr$feeds[[4]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/station_status.json"

$data$fr$feeds[[4]]$name
[1] "station_status"


$data$fr$feeds[[5]]
$data$fr$feeds[[5]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/free_bike_status.json"

$data$fr$feeds[[5]]$name
[1] "free_bike_status"


$data$fr$feeds[[6]]
$data$fr$feeds[[6]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/system_hours.json"

$data$fr$feeds[[6]]$name
[1] "system_hours"


$data$fr$feeds[[7]]
$data$fr$feeds[[7]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/system_calendar.json"

$data$fr$feeds[[7]]$name
[1] "system_calendar"


$data$fr$feeds[[8]]
$data$fr$feeds[[8]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/system_regions.json"

$data$fr$feeds[[8]]$name
[1] "system_regions"


$data$fr$feeds[[9]]
$data$fr$feeds[[9]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/system_pricing_plans.json"

$data$fr$feeds[[9]]$name
[1] "system_pricing_plans"


$data$fr$feeds[[10]]
$data$fr$feeds[[10]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/system_alerts.json"

$data$fr$feeds[[10]]$name
[1] "system_alerts"


$data$fr$feeds[[11]]
$data$fr$feeds[[11]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/gbfs_versions.json"

$data$fr$feeds[[11]]$name
[1] "gbfs_versions"


$data$fr$feeds[[12]]
$data$fr$feeds[[12]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/fr/vehicle_types.json"

$data$fr$feeds[[12]]$name
[1] "vehicle_types"




$data$es
$data$es$feeds
$data$es$feeds[[1]]
$data$es$feeds[[1]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/gbfs.json"

$data$es$feeds[[1]]$name
[1] "gbfs"


$data$es$feeds[[2]]
$data$es$feeds[[2]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/system_information.json"

$data$es$feeds[[2]]$name
[1] "system_information"


$data$es$feeds[[3]]
$data$es$feeds[[3]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/station_information.json"

$data$es$feeds[[3]]$name
[1] "station_information"


$data$es$feeds[[4]]
$data$es$feeds[[4]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/station_status.json"

$data$es$feeds[[4]]$name
[1] "station_status"


$data$es$feeds[[5]]
$data$es$feeds[[5]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/free_bike_status.json"

$data$es$feeds[[5]]$name
[1] "free_bike_status"


$data$es$feeds[[6]]
$data$es$feeds[[6]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/system_hours.json"

$data$es$feeds[[6]]$name
[1] "system_hours"


$data$es$feeds[[7]]
$data$es$feeds[[7]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/system_calendar.json"

$data$es$feeds[[7]]$name
[1] "system_calendar"


$data$es$feeds[[8]]
$data$es$feeds[[8]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/system_regions.json"

$data$es$feeds[[8]]$name
[1] "system_regions"


$data$es$feeds[[9]]
$data$es$feeds[[9]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/system_pricing_plans.json"

$data$es$feeds[[9]]$name
[1] "system_pricing_plans"


$data$es$feeds[[10]]
$data$es$feeds[[10]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/system_alerts.json"

$data$es$feeds[[10]]$name
[1] "system_alerts"


$data$es$feeds[[11]]
$data$es$feeds[[11]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/gbfs_versions.json"

$data$es$feeds[[11]]$name
[1] "gbfs_versions"


$data$es$feeds[[12]]
$data$es$feeds[[12]]$url
[1] "https://gbfs.lyft.com/gbfs/2.3/bkn/es/vehicle_types.json"

$data$es$feeds[[12]]$name
[1] "vehicle_types"





$last_updated
[1] 1728216018

$ttl
[1] 60

$version
[1] "2.3"</code></pre>
</div>
</div>
</section>
<section id="example-3-citibike-nyc-1" class="slide level2">
<h2>Example 3: Citibike NYC</h2>
<p>A slightly messier case:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb125" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a aria-hidden="true" tabindex="-1"></a>bikes_tib <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">bikes =</span> bikes<span class="sc">$</span>data<span class="sc">$</span>en<span class="sc">$</span>feeds) <span class="sc">|&gt;</span> </span>
<span id="cb125-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(bikes)</span>
<span id="cb125-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-4"><a aria-hidden="true" tabindex="-1"></a>bikevec <span class="ot">&lt;-</span> bikes_tib<span class="sc">$</span>url <span class="sc">|&gt;</span> </span>
<span id="cb125-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(bikes_tib<span class="sc">$</span>name)</span>
<span id="cb125-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-7"><a aria-hidden="true" tabindex="-1"></a><span class="do">## Available feeds</span></span>
<span id="cb125-8"><a aria-hidden="true" tabindex="-1"></a>bikevec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code>                                                             gbfs 
                   "https://gbfs.lyft.com/gbfs/2.3/bkn/gbfs.json" 
                                               system_information 
  "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_information.json" 
                                              station_information 
 "https://gbfs.lyft.com/gbfs/2.3/bkn/en/station_information.json" 
                                                   station_status 
      "https://gbfs.lyft.com/gbfs/2.3/bkn/en/station_status.json" 
                                                 free_bike_status 
    "https://gbfs.lyft.com/gbfs/2.3/bkn/en/free_bike_status.json" 
                                                     system_hours 
        "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_hours.json" 
                                                  system_calendar 
     "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_calendar.json" 
                                                   system_regions 
      "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_regions.json" 
                                             system_pricing_plans 
"https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_pricing_plans.json" 
                                                    system_alerts 
       "https://gbfs.lyft.com/gbfs/2.3/bkn/en/system_alerts.json" 
                                                    gbfs_versions 
       "https://gbfs.lyft.com/gbfs/2.3/bkn/en/gbfs_versions.json" 
                                                    vehicle_types 
       "https://gbfs.lyft.com/gbfs/2.3/bkn/en/vehicle_types.json" </code></pre>
</div>
</div>
</section>
<section id="example-3-citibike-nyc-2" class="slide level2">
<h2>Example 3: Citibike NYC</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb127" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a aria-hidden="true" tabindex="-1"></a><span class="do">## Q: Why do we write it like this?</span></span>
<span id="cb127-2"><a aria-hidden="true" tabindex="-1"></a>nyc_stations <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">stations =</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(bikevec[<span class="st">"station_status"</span>])<span class="sc">$</span>data) </span>
<span id="cb127-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-4"><a aria-hidden="true" tabindex="-1"></a>nyc_stations</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 1 × 1
  stations      
  &lt;named list&gt;  
1 &lt;list [2,226]&gt;</code></pre>
</div>
</div>
</section>
<section id="example-3-citibike-nyc-3" class="slide level2">
<h2>Example 3: Citibike NYC</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb129" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a aria-hidden="true" tabindex="-1"></a><span class="do">## Live! (At the time of rendering)</span></span>
<span id="cb129-2"><a aria-hidden="true" tabindex="-1"></a>nyc_stations <span class="sc">|&gt;</span> </span>
<span id="cb129-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(stations, <span class="at">names_sep =</span> <span class="st">"_"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 1 × 2,226
  stations_1   stations_2   stations_3   stations_4   stations_5   stations_6  
  &lt;list&gt;       &lt;list&gt;       &lt;list&gt;       &lt;list&gt;       &lt;list&gt;       &lt;list&gt;      
1 &lt;named list&gt; &lt;named list&gt; &lt;named list&gt; &lt;named list&gt; &lt;named list&gt; &lt;named list&gt;
# ℹ 2,220 more variables: stations_7 &lt;list&gt;, stations_8 &lt;list&gt;,
#   stations_9 &lt;list&gt;, stations_10 &lt;list&gt;, stations_11 &lt;list&gt;,
#   stations_12 &lt;list&gt;, stations_13 &lt;list&gt;, stations_14 &lt;list&gt;,
#   stations_15 &lt;list&gt;, stations_16 &lt;list&gt;, stations_17 &lt;list&gt;,
#   stations_18 &lt;list&gt;, stations_19 &lt;list&gt;, stations_20 &lt;list&gt;,
#   stations_21 &lt;list&gt;, stations_22 &lt;list&gt;, stations_23 &lt;list&gt;,
#   stations_24 &lt;list&gt;, stations_25 &lt;list&gt;, stations_26 &lt;list&gt;, …</code></pre>
</div>
</div>
</section>
<section id="example-3-citibike-nyc-4" class="slide level2">
<h2>Example 3: Citibike NYC</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb131" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a aria-hidden="true" tabindex="-1"></a>nyc_stations <span class="sc">|&gt;</span> </span>
<span id="cb131-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(stations, <span class="at">names_sep =</span> <span class="st">"_"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb131-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">starts_with</span>(<span class="st">"stations"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,226 × 2
   name        value            
   &lt;chr&gt;       &lt;list&gt;           
 1 stations_1  &lt;named list [11]&gt;
 2 stations_2  &lt;named list [11]&gt;
 3 stations_3  &lt;named list [13]&gt;
 4 stations_4  &lt;named list [13]&gt;
 5 stations_5  &lt;named list [13]&gt;
 6 stations_6  &lt;named list [13]&gt;
 7 stations_7  &lt;named list [13]&gt;
 8 stations_8  &lt;named list [13]&gt;
 9 stations_9  &lt;named list [13]&gt;
10 stations_10 &lt;named list [13]&gt;
# ℹ 2,216 more rows</code></pre>
</div>
</div>
</section>
<section id="example-3-citibike-nyc-5" class="slide level2">
<h2>Example 3: Citibike NYC</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb133" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a aria-hidden="true" tabindex="-1"></a>nyc_stations <span class="sc">|&gt;</span> </span>
<span id="cb133-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(stations, <span class="at">names_sep =</span> <span class="st">"_"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb133-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">starts_with</span>(<span class="st">"stations"</span>)) <span class="sc">|&gt;</span>   </span>
<span id="cb133-4"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,226 × 14
   name        station_id   num_ebikes_available is_returning num_docks_disabled
   &lt;chr&gt;       &lt;chr&gt;                       &lt;int&gt;        &lt;int&gt;              &lt;int&gt;
 1 stations_1  26cae473-0e…                    0            0                  0
 2 stations_2  66dc0dab-0a…                    0            0                  0
 3 stations_3  ed279ef2-52…                    6            1                  0
 4 stations_4  f34ea09d-32…                    0            1                  0
 5 stations_5  cb05443c-e6…                    2            1                  0
 6 stations_6  66dced76-0a…                    9            1                  0
 7 stations_7  18380710088…                   22            1                  0
 8 stations_8  44c23eaa-7d…                    0            1                  0
 9 stations_9  cd2d9dab-77…                    2            1                  0
10 stations_10 18352466583…                    4            1                  0
# ℹ 2,216 more rows
# ℹ 9 more variables: is_installed &lt;int&gt;, num_docks_available &lt;int&gt;,
#   vehicle_types_available &lt;list&gt;, num_bikes_available &lt;int&gt;,
#   is_renting &lt;int&gt;, num_bikes_disabled &lt;int&gt;, last_reported &lt;int&gt;,
#   num_scooters_unavailable &lt;int&gt;, num_scooters_available &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="example-3-citibike-nyc-6" class="slide level2">
<h2>Example 3: Citibike NYC</h2>
<p>Extra info on the stations:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb135" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a aria-hidden="true" tabindex="-1"></a><span class="do">## Q: Why do we write it like this?</span></span>
<span id="cb135-2"><a aria-hidden="true" tabindex="-1"></a>nyc_stations_info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">stations =</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(bikevec[<span class="st">"station_information"</span>])<span class="sc">$</span>data[[<span class="dv">1</span>]])</span>
<span id="cb135-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-4"><a aria-hidden="true" tabindex="-1"></a>nyc_stations_info <span class="sc">|&gt;</span></span>
<span id="cb135-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(stations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 2,226 × 8
   station_id       name  capacity   lat   lon region_id short_name rental_uris 
   &lt;chr&gt;            &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      &lt;list&gt;      
 1 26cae473-0e59-4… Madi…        3  40.7 -73.9 71        4880.11    &lt;named list&gt;
 2 66dc0dab-0aca-1… W 59…      117  40.8 -74.0 71        7023.04    &lt;named list&gt;
 3 7938263e-e5b8-4… Sout…       27  40.8 -73.9 71        7788.13    &lt;named list&gt;
 4 66dc8a3d-0aca-1… Lexi…       79  40.7 -74.0 71        6089.07    &lt;named list&gt;
 5 187169822334465… Lee …       25  40.7 -74.0 71        5053.01    &lt;named list&gt;
 6 e9575102-1081-4… Berg…       21  40.7 -73.9 71        4072.02    &lt;named list&gt;
 7 66dc2995-0aca-1… W 25…       51  40.7 -74.0 71        6215.04    &lt;named list&gt;
 8 6e5a8cab-cf1a-4… Rive…       27  40.8 -73.9 71        8005.08    &lt;named list&gt;
 9 188282428778950… 3 Av…       47  40.8 -74.0 71        6960.12    &lt;named list&gt;
10 ebae0b66-e463-4… Morr…       23  40.8 -73.9 71        7821.01    &lt;named list&gt;
# ℹ 2,216 more rows</code></pre>
</div>
</div>
<p>From here we could join these two tables.</p>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'slow',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/kjhealy\.github\.io\/data_wrangling");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

<script src="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.js" defer="true"></script>
</body></html>